<?php
  header("access-control-allow-origin: *");

  include ("conexion_BD.php");

  $imagebase = 'data:image/jpeg;base64,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';

  $img = str_replace('data:image/jpeg;base64,','', $imagebase);

  $sql="UPDATE ascensor_valores_fotografias SET n_directorio='".$img."' WHERE consecutivo='1'";
  if (mysqli_query($con,$sql) == true){
    echo "Registro actualizado con éxito!<br>";
  }else{
    echo $con->error."\nerror: ". $sql . "<br>";
  }

  $cod_usuario = 1;
  $cod_inspeccion = 1;
  $cod_item = 2;
  $nombre_fotografia = "foto";
  $nombre_directorio = $imagebase;
  $o_estado_envio = "estado_envio";

  $img = str_replace('data:image/jpeg;base64,','', $nombre_directorio);

  $sql="INSERT INTO ascensor_valores_fotografias(
                      k_codusuario,
                      k_codinspeccion,
                      k_coditem,
                      n_fotografia,
                      n_directorio,
                      o_estado_envio)
              VALUES(".$cod_usuario.",
                     ".$cod_inspeccion.",                                       
                     ".$cod_item.",
                     '".$nombre_fotografia."',
                     '".$nombre_directorio."',
                     '".$o_estado_envio."')";
  if (mysqli_query($con,$sql) == true){
    echo "Registros guardados correctamente.";
    //$bandera_sql += 1;
  }else{
    echo $con->error."\nerror: ". $sql . "<br>";
    // $bandera_sql += 10;
  }
?>